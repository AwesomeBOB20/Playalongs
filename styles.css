@import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400&display=swap');

/* ===== Theme ===== */
:root{
  --black:#000; --white:#fff;
  --bg:#1c1c1c;
  --orange:#d35400; --orange-d:#c25227; --orange-dim:#a84300;
  --purple:#96318d; --purple-d:#81227a; --purple-dim:#752070;
  --gray-1:#ddd; --gray-2:#808080; --gray-3:#53525d;
}

/* ===== Global ===== */
*{ box-sizing:border-box; }
html, body { font-family:'Ubuntu',sans-serif; font-weight:400; }
*, *::before, *::after { font-family:inherit; }
input, button, select, textarea { font:inherit; }
input::placeholder, textarea::placeholder { font-family:inherit; }

body{ margin:0; background:var(--bg); color:var(--white); }
.container{ width:90%; max-width:1000px; margin:20px auto; text-align:center; }

/* iOS interaction guards */
.bar{
  touch-action:none;
  -webkit-user-select:none; user-select:none;
  -webkit-tap-highlight-color:transparent;
  overscroll-behavior:contain;
}
.tempo-slider{
  touch-action:manipulation;            /* key change */
  -webkit-tap-highlight-color:transparent;
}
.bar__fill{ pointer-events:none; }
#tempoLabel, .tempo-control label{ pointer-events:none; }

/* ===== Sheet music ===== */
.sheet-music{ margin:40px 0; }
.sheet-music img{ max-width:100%; height:auto; border:2px solid var(--black); }

/* ===== Inputs ===== */
.selector{
  width:10rem; max-width:100%;
  padding:5px 8px; font-size:.9rem;
  border:2px solid var(--black); border-radius:5px; text-align:left; color:var(--white);
  background:var(--orange);
}
.selector::placeholder{ color:var(--white); opacity:1; }

/* Disabled selectors — EXACT match to disabled buttons (no iOS fade) */
.selector:disabled{
  background:var(--orange-dim) !important;
  color:#fff !important;
  border-color:var(--black) !important;
  cursor:not-allowed !important;
  opacity:1 !important;
  -webkit-text-fill-color:#fff !important; /* iOS */
  filter:brightness(.85) saturate(.95) !important; /* match .btn:disabled */
}

/* Variants */
.selector--orange{ background:var(--orange); }
.selector--orange:hover,.selector--orange:focus{ background:var(--orange-d); }
.selector--purple{ background:var(--purple); }
.selector--purple:hover,.selector--purple:focus{ background:var(--purple-d); }

/* Playlist Queue disabled stays purple, matching purple buttons */
#playlistQueueSearch.selector:disabled{
  background:var(--purple-dim) !important;
  filter:brightness(.9) saturate(.95) !important;
}

/* Tempo utility inputs */
.tempo-input{
  width:6.4rem; height:40px;
  padding:6px; font-size:1rem;
  border:2px solid var(--black); border-radius:5px;
  background:#fff; color:#000;
}
/* Slightly darker disabled Reps/Min/Max */
#repsPerTempo:disabled,
#minTempo:disabled,
#maxTempo:disabled{
  background:#d9d9d9;
  color:#444;
  border-color:var(--black);
  cursor:not-allowed;
  opacity:1;
  -webkit-text-fill-color:currentColor;
}

/* ===== Buttons ===== */
.btn{
  height:40px; display:inline-flex; align-items:center; justify-content:center;
  border:2px solid var(--black); color:var(--white); font-size:1.2rem;
  padding:6px 12px; border-radius:5px; cursor:pointer; margin:0;
  touch-action:manipulation; -webkit-user-select:none; user-select:none; -webkit-tap-highlight-color:transparent;
}
.btn--orange{ background:var(--orange); }
.btn--orange:hover{ background:var(--orange-d); }
.btn--purple{ background:var(--purple); }
.btn--purple:hover{ background:var(--purple-d); }
.btn:disabled{
  background:var(--orange-dim);
  cursor:not-allowed;
  opacity:1; filter:brightness(.85) saturate(.95);
}
.btn--purple:disabled{ background:var(--purple-dim); opacity:1; filter:brightness(.9) saturate(.95); }
.btn-square{ width:45px; }

/* ===== Random container ===== */
.random-container{
  display:flex; align-items:center; border:2px solid var(--black); border-radius:5px; overflow:hidden;
  margin:0; background:var(--orange); padding:0;
}
.random-container:hover{ background:var(--orange-d); }
.random-container .btn, .random-container .auto-label{
  margin:0; height:40px; display:inline-flex; align-items:center; justify-content:center;
}
.random-container .btn{ border:0; }
/* Avoid double-darkening when disabled */
.random-container.disabled{ background:var(--orange-dim); cursor:not-allowed; }
.random-container.disabled .btn{ background:var(--orange-dim); cursor:not-allowed; }

.vertical-divider{ width:2px; background:var(--black); align-self:stretch; margin:0; height:40px; }

/* ===== Auto label ===== */
.auto-label{
  height:40px; display:inline-flex; align-items:center; justify-content:center;
  background:var(--orange); color:var(--white);
  font-size:1.2rem; padding:6px 12px; cursor:pointer; border-radius:5px; border:0; margin:0;
}
.auto-label:hover{ background:var(--orange-d); }
.auto-label input[type="checkbox"]{ margin:0 10px 0 0; accent-color:var(--purple); }
.auto-label.disabled{ background:var(--orange-dim); cursor:not-allowed; }

/* ===== Sliders ===== */
.volume-slider{
  -webkit-appearance:none; appearance:none; width:75%; max-width:600px; height:12px; border-radius:5px;
  margin:20px auto; box-shadow:inset 0 0 0 2px var(--black); background:var(--gray-1); cursor:pointer;
}
.tempo-slider{
  -webkit-appearance:none; appearance:none; width:100%; max-width:100%; height:12px; border-radius:5px;
  margin:0 auto; box-shadow:inset 0 0 0 2px var(--black); background:var(--gray-1); cursor:pointer;
}
.volume-slider::-webkit-slider-thumb, .tempo-slider::-webkit-slider-thumb,
.volume-slider::-moz-range-thumb,   .tempo-slider::-moz-range-thumb{
  width:20px; height:20px; background:var(--white); border-radius:50%; border:2px solid var(--black); cursor:pointer;
}
.volume-slider::-webkit-slider-runnable-track, .tempo-slider::-webkit-slider-runnable-track,
.volume-slider::-moz-range-track,              .tempo-slider::-moz-range-track{ background:transparent; border:none; }

/* Disabled range visuals (Safari) */
input[type="range"]:disabled{ opacity:1; }
input[type="range"]:disabled::-webkit-slider-runnable-track{ background:#c7b8c5; }
input[type="range"]:disabled::-webkit-slider-thumb{ background:#9b9b9b; }

/* ===== Layout (40px section spacing) ===== */
.control-container{
  display:flex; justify-content:center; align-items:center;
  gap:20px; margin:40px auto; flex-wrap:wrap; width:100%;
}
.exercise-group, .playlist-group{
  display:flex; align-items:center; justify-content:center;
  gap:20px;
}
#exerciseSearch.selector, #playlistQueueSearch.selector{ width:150px; } /* desktop */
.exercise-container, .category-container, .playlist-container, .playlist-queue-container{ position:relative; }

/* ===== Tempo column ===== */
.tempo-control{
  width:75%; max-width:600px; margin:40px auto;
  display:flex; flex-direction:column; align-items:center; gap:8px;
}
.tempo-control label{ margin:0; color:var(--white); width:100%; text-align:center; }

/* ===== Progress bars ===== */
.progress-container, .playlist-progress-container{ width:75%; max-width:600px; margin:40px auto; }
.playlist-progress-container{ display:none; }
.bar{
  position:relative; height:40px; background:var(--white);
  border:2px solid var(--black); overflow:hidden; margin:0 auto;
}
/* Transform-based fill for smooth iOS paints */
.bar__fill{
  width:100%; height:100%; background:var(--orange);
  transform-origin:left center; transform:scaleX(0); will-change:transform;
}
/* keep color-only override (no width transition to avoid conflict with scaleX) */
.bar--playlist .bar__fill{ background:var(--purple); }

.time-overlay, .playlist-time-overlay{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  font-size:1rem; color:var(--black); pointer-events:none;
}

/* Playlist progress visuals */
.playlist-progress-bar{ position:relative; width:100%; height:40px; background:var(--white); border:2px solid var(--black); overflow:hidden; }
#playlistProgress{ width:0%; height:100%; background:var(--purple); transition:width .2s linear; }

/* ===== Menus ===== */
.menu{
  position:absolute; top:calc(100% - 5px); left:0; transform:none;
  border:1px solid var(--gray-2); border-radius:3px; list-style:none; margin:0; padding:3px; white-space:nowrap; display:none; z-index:999;
  max-height:50vh; overflow-y:auto; min-width:100%; text-align:left;
}
.menu--orange{ background:var(--orange); }
.menu--purple{ background:var(--purple); }
.menu li{ padding:5px 8px; cursor:pointer; color:var(--white); font-size:.9rem; text-align:left; }
.menu li:hover{ background:var(--gray-3); }
.menu li.active-option{ background:var(--white); color:inherit; }
.menu--purple li.active-option{ color:var(--purple); }
.menu--orange  li.active-option{ color:var(--orange); }
body:not(.playlist-mode) #playlistQueueList li:hover{ background:inherit; cursor:default; }

/* ===== Playlist mode locks ===== */
body.playlist-mode #categoryList{ display:none !important; }
body.playlist-mode #exerciseSearch.selector{ background:var(--purple); }
body.playlist-mode #exerciseSearch.selector:hover,
body.playlist-mode #exerciseSearch.selector:focus{ background:var(--purple-d); }
body.playlist-mode #exerciseList.menu{ background:var(--purple); border:1px solid var(--gray-2); }
body.playlist-mode .btn-square{ background:var(--purple); border:2px solid var(--black); }
body.playlist-mode .btn-square:hover{ background:var(--purple-d); }

/* Selected Exercise item purple on white in playlist mode */
body.playlist-mode #exerciseList li.active-option{ color:var(--purple) !important; }

/* ===== Scrollbar (optional) ===== */
::-webkit-scrollbar{ width:8px; height:8px; }
::-webkit-scrollbar-track{ background:#2c2c2c; }
::-webkit-scrollbar-thumb{ background:var(--purple); border-radius:4px; }
::-webkit-scrollbar-thumb:hover{ background:#e67e22; }

/* ===== Mobile (≤600px) ===== */
@media (max-width:600px){
  body{ font-size:.95rem; }

  .control-container{
    flex-direction:column;
    align-items:stretch;
    gap:20px;
    margin:40px auto;
  }

  .exercise-group,
  .playlist-group{
    width:100%;
    display:grid;
    grid-template-columns:40px minmax(0,1fr) 40px;
    gap:20px;
    align-items:center;
  }
  .btn-square{ width:40px; height:40px; }

  .exercise-container,
  .playlist-queue-container{ min-width:0; }
  #exerciseSearch.selector,
  #playlistQueueSearch.selector{ width:100% !important; min-width:0; }

  .selector{ width:100%; height:40px; }
  .btn{ width:100%; height:40px; }
  .tempo-input{ width:100%; height:40px; }

  .control-container:has(#playPauseBtn){
    display:grid;
    grid-template-columns:1fr 1fr 1fr;
    grid-auto-rows:auto;
    gap:20px;
  }

  #playPauseBtn{ grid-column:1 / 4; }
  .random-container{ grid-column:1 / 4; }

  .random-container{ flex-direction:row; }
  .random-container .btn{ flex:7; min-width:0; }
  .random-container .auto-label{ flex:3; min-width:0; }
  .vertical-divider{ display:block; height:40px; }

  #repsPerTempo{ grid-column:1 / 2; }
  #minTempo{     grid-column:2 / 3; }
  #maxTempo{     grid-column:3 / 4; }

  .tempo-control{ width:100%; max-width:600px; margin:40px auto; }
  .progress-container, .playlist-progress-container{ width:100%; margin:40px auto; }

  .menu{ top:calc(100% - 10px); width:100%; left:0; transform:none; }
}

/* ===== Accessibility & disabled parity (no iOS fade) ===== */
button:disabled,
input[type="button"]:disabled,
input[type="submit"]:disabled{
  opacity:1;
  filter:brightness(.85) saturate(.95);
  cursor:not-allowed;
}
/* Generic disabled input styling — don't override .selector */
select:disabled:not(.selector),
input[type="text"]:disabled:not(.selector),
input[type="search"]:disabled:not(.selector),
input[type="number"]:disabled{
  opacity:1;
  background:#efefef;
  color:#555;
  border-color:var(--black);
  -webkit-text-fill-color:currentColor;
}

/* aria-disabled/.disabled parity */
[aria-disabled="true"],
.disabled{
  opacity:1 !important;
  filter:brightness(.9) saturate(.95);
  cursor:not-allowed;
}

/* --- Webflow typography guard (keep at end) --- */
.container .auto-label,
.container .auto-label *,
.container .tempo-control label,
.container .tempo-control label *,
.container #tempoLabel{
  font-weight:400 !important;
  font-style:normal !important;
  text-transform:none !important;
  letter-spacing:normal !important;
  font-family:'Ubuntu',sans-serif !important;
}
